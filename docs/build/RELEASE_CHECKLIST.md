# 发布前检查清单

在发布应用到生产环境之前，请确保完成以下所有检查项。

## 📋 代码质量

- [ ] 所有单元测试通过
- [ ] 所有属性测试通过
- [ ] 所有集成测试通过
- [ ] 代码分析无错误 (`flutter analyze`)
- [ ] 代码格式化正确 (`dart format .`)
- [ ] 移除所有 `print()` 调试语句
- [ ] 移除所有 `TODO` 和 `FIXME` 注释
- [ ] 代码已提交到版本控制
- [ ] 创建了版本标签（如 `v1.0.0`）

## 🔧 配置检查

- [ ] `pubspec.yaml` 版本号已更新
- [ ] Firebase 生产环境已配置
- [ ] `firebase_options.dart` 包含正确的生产配置
- [ ] Firestore 安全规则已部署
- [ ] Storage 安全规则已部署
- [ ] API 密钥已配置且有效
- [ ] 环境变量已设置（如有）

## 🔐 安全检查

- [ ] 代码混淆已启用
- [ ] ProGuard 规则已配置
- [ ] 敏感信息未硬编码
- [ ] API 密钥未提交到版本控制
- [ ] Keystore 文件已安全保存
- [ ] 证书和私钥已备份
- [ ] 截屏保护已启用（Android）
- [ ] 剪贴板自动清除功能正常

## 📱 Android 检查

- [ ] `android/app/build.gradle` 配置正确
- [ ] `minSdkVersion` 设置合理（建议 21+）
- [ ] `targetSdkVersion` 为最新稳定版
- [ ] 应用签名配置正确
- [ ] `key.properties` 文件已创建
- [ ] ProGuard 规则已测试
- [ ] APK 构建成功
- [ ] AAB 构建成功
- [ ] 在真机上测试 release 版本
- [ ] 应用图标显示正常
- [ ] 启动画面显示正常
- [ ] 权限请求正常

## 🍎 iOS 检查

- [ ] Apple Developer 账号已激活
- [ ] App ID 已创建
- [ ] 证书已安装
- [ ] Provisioning Profile 已配置
- [ ] `ios/Runner/Info.plist` 权限说明完整
- [ ] Bundle Identifier 正确
- [ ] Xcode 签名配置正确
- [ ] IPA 构建成功
- [ ] 在真机上测试 release 版本
- [ ] 应用图标显示正常
- [ ] 启动画面显示正常

## ✨ 功能测试

### 笔记功能
- [ ] 创建笔记
- [ ] 编辑笔记
- [ ] 删除笔记
- [ ] 搜索笔记
- [ ] 笔记列表排序
- [ ] 标签功能

### 密码库功能
- [ ] 设置主密码
- [ ] 解锁密码库
- [ ] 创建密码条目
- [ ] 编辑密码条目
- [ ] 删除密码条目
- [ ] 复制密码
- [ ] 密码自动清除

### 同步功能
- [ ] 登录/注册
- [ ] 上行同步（本地 → 云端）
- [ ] 下行同步（云端 → 本地）
- [ ] 冲突解决
- [ ] 登出

### 导入导出
- [ ] 导出笔记
- [ ] 导出密码库
- [ ] 导入数据
- [ ] 导入冲突解决

### 离线功能
- [ ] 离线创建笔记
- [ ] 离线编辑笔记
- [ ] 网络恢复后自动同步
- [ ] 离线冲突解决

## 🎨 UI/UX 测试

- [ ] 所有屏幕尺寸适配正常
  - [ ] 小屏手机（< 5 英寸）
  - [ ] 中等手机（5-6 英寸）
  - [ ] 大屏手机（> 6 英寸）
  - [ ] 平板
- [ ] 横屏/竖屏切换正常
- [ ] 深色主题显示正常
- [ ] 浅色主题显示正常
- [ ] 字体大小适配正常
- [ ] 动画流畅（60 FPS）
- [ ] 无 UI 闪烁或卡顿
- [ ] 加载状态显示正常
- [ ] 错误提示友好
- [ ] 空状态显示正常
- [ ] 按钮点击反馈正常

## ⚡ 性能测试

- [ ] 应用启动时间 < 3 秒
- [ ] 列表滚动流畅
- [ ] 搜索响应快速
- [ ] 加密解密性能正常
- [ ] 内存使用合理（< 200MB）
- [ ] 电池消耗正常
- [ ] 网络请求优化
- [ ] 数据库查询优化

## 🔍 边缘情况测试

- [ ] 网络中断时的行为
- [ ] 低内存情况
- [ ] 低电量情况
- [ ] 应用切后台再恢复
- [ ] 系统语言切换
- [ ] 时区变化
- [ ] 权限被拒绝
- [ ] 存储空间不足
- [ ] 超长文本输入
- [ ] 特殊字符输入
- [ ] 空输入处理

## 📄 文档检查

- [ ] README.md 已更新
- [ ] CHANGELOG.md 已更新
- [ ] API 文档已更新（如有）
- [ ] 用户手册已准备（如有）
- [ ] 隐私政策已准备
- [ ] 服务条款已准备
- [ ] 开源许可证已声明

## 🏪 应用商店准备

### Google Play Store
- [ ] Google Play Console 账号已创建
- [ ] 应用已创建
- [ ] 应用描述已填写（中文/英文）
- [ ] 应用截图已准备（至少 2 张）
- [ ] 应用图标已上传
- [ ] 功能图形已准备（1024x500）
- [ ] 内容分级问卷已完成
- [ ] 定价和分发已设置
- [ ] 隐私政策 URL 已填写
- [ ] AAB 文件已上传

### Apple App Store
- [ ] App Store Connect 账号已创建
- [ ] 应用已创建
- [ ] 应用描述已填写（中文/英文）
- [ ] 应用截图已准备
  - [ ] iPhone 6.7" (1290x2796)
  - [ ] iPhone 6.5" (1242x2688)
  - [ ] iPhone 5.5" (1242x2208)
  - [ ] iPad Pro 12.9" (2048x2732)
- [ ] 应用图标已上传
- [ ] 应用预览视频已准备（可选）
- [ ] 隐私政策 URL 已填写
- [ ] 支持 URL 已填写
- [ ] 年龄分级已选择
- [ ] IPA 文件已上传
- [ ] TestFlight 测试已完成

## 🚀 发布流程

- [ ] 创建发布分支（如 `release/v1.0.0`）
- [ ] 更新版本号
- [ ] 运行完整测试套件
- [ ] 构建 release 版本
- [ ] 在真机上测试
- [ ] 上传到应用商店
- [ ] 提交审核
- [ ] 合并到主分支
- [ ] 创建 Git 标签
- [ ] 发布 Release Notes

## 📊 监控准备

- [ ] Firebase Crashlytics 已配置
- [ ] 错误日志已脱敏
- [ ] 性能监控已启用
- [ ] 分析事件已配置
- [ ] 告警规则已设置

## 🔄 回滚计划

- [ ] 旧版本 APK/IPA 已备份
- [ ] 数据库迁移可回滚
- [ ] API 向后兼容
- [ ] 回滚步骤已文档化

## ✅ 最终确认

- [ ] 所有上述检查项已完成
- [ ] 团队成员已审核
- [ ] 产品经理已批准
- [ ] 技术负责人已批准
- [ ] 准备好处理用户反馈
- [ ] 准备好紧急修复流程

---

## 签名

**检查人员**: ___________________  
**日期**: ___________________  
**版本**: ___________________  

**批准人员**: ___________________  
**日期**: ___________________  

---

## 注意事项

⚠️ **重要提醒**：
1. 首次发布建议先进行小范围测试（TestFlight / 内部测试）
2. 准备好快速响应用户反馈的机制
3. 监控应用崩溃率和性能指标
4. 保持与用户的沟通渠道畅通
5. 准备好紧急修复和热更新方案

📝 **发布后任务**：
- 监控应用商店审核状态
- 关注用户评论和反馈
- 监控 Crashlytics 报告
- 准备下一个版本的规划
